<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="windows-1252"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ThumbnailCreator - PDF ? PNG (TrimBox)</title>
<style>
  body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:0;padding:20px;background:#f5f7fb;color:#1f2937;}
  h1{margin:0 0 12px 0}
  #drop{border:2px dashed rgba(17,24,39,.18);border-radius:12px;padding:28px;text-align:center;background:#fff;}
  #drop.dragover{border-color:#0a84ff;background:#eef8ff}
  .dl{display:inline-block;margin-top:12px;background:#0a84ff;color:#fff;padding:8px 12px;border-radius:8px;text-decoration:none}
  #status{margin-top:10px;color:#6b7280}
</style>
</head>
<body>
  <h1>ThumbnailCreator — PDF ? PNG (TrimBox)</h1>
  <div id="drop" title="Click or drop PDFs">
    <strong>Drop PDFs here</strong><br>or click to select
    <div style="margin-top:8px;font-size:13px;color:#6b7280">Server-side TrimBox cropping; returns ZIP of PNGs.</div>
  </div>
  <div id="status">Idle</div>
  <input id="fileInput" type="file" accept="application/pdf" multiple hidden>

<script>
const drop = document.getElementById('drop');
const input = document.getElementById('fileInput');
const status = document.getElementById('status');

const SERVER_URL = 'https://YOUR_SERVER_URL'; // <-- REPLACE this with your deployed server URL

drop.addEventListener('click', ()=> input.click());
drop.addEventListener('dragover', e=>{ e.preventDefault(); drop.classList.add('dragover'); });
drop.addEventListener('dragleave', e=>{ drop.classList.remove('dragover'); });
drop.addEventListener('drop', e=>{ e.preventDefault(); drop.classList.remove('dragover'); handleFiles(e.dataTransfer.files); });
input.addEventListener('change', e=> handleFiles(e.target.files));

async function handleFiles(fileList){
  const files = Array.from(fileList).filter(f=>f.type==='application/pdf' || f.name.toLowerCase().endsWith('.pdf'));
  if(!files.length){ status.textContent = 'No PDFs selected.'; return; }
  status.textContent = 'Uploading ' + files.length + ' PDF(s)...';

  const form = new FormData();
  files.forEach(f=> form.append('files', f));

  try{
    const res = await fetch(SERVER_URL + '/api/convert', { method:'POST', body: form });
    if(!res.ok) throw new Error('Server error: ' + res.status);
    const blob = await res.blob();
    const url = URL.createObjectURL(blob);

    // Create a download link
    const a = document.createElement('a');
    a.href = url;
    a.download = 'converted_pngs.zip';
    a.className = 'dl';
    a.textContent = 'Download ZIP of PNGs';
    // replace previous status content with link
    status.innerHTML = '';
    status.appendChild(a);
  } catch(err){
    status.textContent = 'Error: ' + err.message;
    console.error(err);
  }
}
</script>
</body>
</html>
